(function(a){a.fn.fbWall=function(b){var c=a.extend({},a.fn.fbWall.defaults,b);var d=this;return d.each(function(){$this=a(this);var g=a.meta?a.extend({},c,$this.data()):c;var i="";var s;var j;var r="https://graph.facebook.com/";d.addClass("fb-wall").addClass("loading").html("");a.ajax({url:r+g.id+"?access_token="+g.accessToken,dataType:"jsonp",success:function(t,u,o){k(t)}});var k=function(t){j=t;if(t==false){d.removeClass("loading").html("The alias you requested do not exist: "+g.id);return false}if(t.error){d.removeClass("loading").html(t.error.message);return false}var o=(g.showGuestEntries=="true"||g.showGuestEntries==true)?"feed":"posts";a.ajax({url:r+g.id+"/"+o+"?limit="+g.max+"&access_token="+g.accessToken,dataType:"jsonp",success:function(v,w,u){d.removeClass("loading");h(v)}})};var h=function(v){v=v.data;var A=v.length;var o,x,z,y;for(var u=0;u<A;u++){x=(v[u].from.id==j.id);z=x&&(m(j.link));if(!g.showGuestEntries&&!x){continue}i+=(u==0)?'<div class="fb-wall-box fb-wall-box-first">':'<div class="fb-wall-box">';i+='<a href="http://www.facebook.com/profile.php?id='+v[u].from.id+'" target="_blank">';i+='<img class="fb-wall-avatar" src="'+q(v[u].from.id)+'" />';i+="</a>";i+='<div class="fb-wall-data">';i+='<span class="fb-wall-message">';i+='<a href="http://www.facebook.com/profile.php?id='+v[u].from.id+'" class="fb-wall-message-from" target="_blank">'+v[u].from.name+"</a> ";if(m(v[u].message)){i+=l(v[u].message)}i+="</span>";if(m(v[u].picture)||m(v[u].link)||m(v[u].caption)||m(v[u].description)){i+=m(v[u].picture)?'<div class="fb-wall-media">':'<div class="fb-wall-media fb-wall-border-left">';if(m(v[u].picture)){if(m(v[u].link)){i+='<a href="'+v[u].link+'" target="_blank" class="fb-wall-media-link">'}i+='<img class="fb-wall-picture" src="'+v[u].picture+'" />';if(m(v[u].link)){i+="</a>"}}i+='<div class="fb-wall-media-container">';if(m(v[u].name)){i+='<a class="fb-wall-name" href="'+v[u].link+'" target="_blank">'+v[u].name+"</a>"}if(m(v[u].caption)){i+='<a class="fb-wall-caption" href="http://'+v[u].caption+'" target="_blank">'+v[u].caption+"</a>"}if(m(v[u].properties)){for(var t=0;t<v[u].properties.length;t++){i+=(t==0)?"<div>"+p(v[u].properties[t].text)+"</div>":"<div>"+v[u].properties[t].text+"</div>"}}if(m(v[u].description)){y=l(v[u].description);if(y.length>299){y=y.substr(0,y.lastIndexOf(" "))+" ..."}i+='<span class="fb-wall-description">'+y+"</span>"}i+="</div>";i+="</div>"}i+='<span class="fb-wall-date">';if(m(v[u].icon)){i+='<img class="fb-wall-icon" src="'+v[u].icon+'" title="'+v[u].type+'" alt="" />'}i+=p(v[u].created_time)+"</span>";if(m(v[u].likes)){if(parseInt(v[u].likes.count)==1){i+='<div class="fb-wall-likes"><div><span>'+v[u].likes.data[0].name+"</span> "+g.translateLikesThis+"</div> </div>"}else{i+='<div class="fb-wall-likes"><div><span>'+v[u].likes.count+" "+g.translatePeople+"</span> "+g.translateLikeThis+"</div> </div>"}}if(m(v[u].comments)&&m(v[u].comments.data)&&(g.showComments==true||g.showComments=="true")){i+='<div class="fb-wall-comments">';for(var w=0;w<v[u].comments.data.length;w++){i+='<span class="fb-wall-comment">';i+='<a href="http://www.facebook.com/profile.php?id='+v[u].comments.data[w].from.id+'" class="fb-wall-comment-avatar" target="_blank">';i+='<img src="'+q(v[u].comments.data[w].from.id)+'" />';i+="</a>";i+='<span class="fb-wall-comment-message">';i+='<a class="fb-wall-comment-from-name" href="http://www.facebook.com/profile.php?id='+v[u].comments.data[w].from.id+'" target="_blank">'+v[u].comments.data[w].from.name+"</a> ";i+=l(v[u].comments.data[w].message);i+='<span class="fb-wall-comment-from-date">'+p(v[u].comments.data[w].created_time)+"</span>";i+="</span>";i+="</span>"}i+="</div>"}i+="</div>";i+='<div class="fb-wall-clean"></div>';i+="</div>"}if(A==0){i+='<div class="fb-wall-box-first">';i+='<img class="fb-wall-avatar" src="'+q(j.id)+'" />';i+='<div class="fb-wall-data">';i+='<span class="fb-wall-message"><span class="fb-wall-message-from">'+j.name+"</span> "+g.translateErrorNoData+"</span>";i+="</div>";i+="</div>"}d.hide().html(i).fadeIn(700)};function q(t){var o;if(t==j.id){o=(g.useAvatarAlternative)?g.avatarAlternative:r+t+"/picture?type=square"}else{o=(g.useAvatarExternal)?g.avatarExternal:r+t+"/picture?type=square"}return o}function p(u){var A,x,B,w,v,C,t,z,y,o;var D=(u.indexOf(" ")==-1&&u.substr(4,1)=="-"&&u.substr(7,1)=="-"&&u.substr(10,1)=="T")?true:false;if(D){A=u.substr(0,4);x=parseInt((u.substr(5,1)=="0")?u.substr(6,1):u.substr(5,2))-1;B=u.substr(8,2);w=u.substr(11,2);v=u.substr(14,2);C=Date.UTC(A,x,B,w,v);t=new Date(C)}else{y=u.split(" ");if(y.length!=6||y[4]!="at"){return u}o=y[5].split(":");z=o[1].substr(2);v=o[1].substr(0,2);w=parseInt(o[0]);if(z=="pm"){w+=12}t=new Date(y[1]+" "+y[2]+" "+y[3]+" "+w+":"+v);t.setTime(t.getTime()-(1000*60*60*7))}B=(t.getDate()<10)?"0"+t.getDate():t.getDate();x=t.getMonth()+1;x=(x<10)?"0"+x:x;w=t.getHours();v=(t.getMinutes()<10)?"0"+t.getMinutes():t.getMinutes();if(g.timeConversion==12){z=(w<12)?"am":"pm";if(w==0){w==12}else{if(w>12){w=w-12}}if(w<10){w="0"+w}return B+"."+x+"."+t.getFullYear()+" at "+w+":"+v+" "+z}return B+"."+x+"."+t.getFullYear()+" "+g.translateAt+" "+w+":"+v}function m(o){if(!o||o==null||o=="undefined"||typeof(o)=="undefined"){return false}else{return true}}function l(o){return f(e(n(o)))}function n(o){return o.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(o){return o.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br>")}function e(o){return o.replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g,'<a href="$1" target="_blank">$1</a>')}})};a.fn.fbWall.defaults={avatarAlternative:"avatar-alternative.jpg",avatarExternal:"avatar-external.jpg",id:"yashilanka",max:5,showComments:true,showGuestEntries:true,translateAt:"at",translateLikeThis:"like this",translateLikesThis:"likes this",translateErrorNoData:"has not shared any information.",translatePeople:"people",timeConversion:24,useAvatarAlternative:false,useAvatarExternal:false,accessToken:""}})(jQuery);